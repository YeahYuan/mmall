webpackJsonp([14],{0:function(t,c,e){t.exports=e(59)},16:function(t,c){},40:function(t,c){t.exports=' {{#cartProductVoList}} <div class=cart-head> <div class="c-select-all c-item"> {{#allChecked}} <input type=checkbox checked=checked><span>全选</span> {{/allChecked}} {{^allChecked}} <input type=checkbox><span>全选</span> {{/allChecked}} </div> <div class="c-product-info c-item"> <span>商品信息</span> </div> <div class="c-price c-item"> <span>单价</span> </div> <div class="c-number c-item"> <span>数量</span> </div> <div class="c-total c-item"> <span>总价</span> </div> <div class="c-operate c-item"> <span>操作</span> </div> </div> <div class=cart-list> {{#cartProductVoList}} <div class=list-item data-product-id={{productId}}> <div class="c-select c-item"> {{#productChecked}} <input type=checkbox checked=checked> {{/productChecked}} {{^productChecked}} <input type=checkbox> {{/productChecked}} </div> <div class="c-img c-item"> <a href="./detail.html?productId={{productId}}"> <img src={{imageHost}}{{productMainImage}} alt={{productName}}> </a> </div> <div class="c-product-info c-item"> <a class=info href="./detail.html?productId={{productId}}">{{productName}}</a> </div> <div class="c-price c-item"> <span>￥{{productPrice}}</span> </div> <div class="c-number c-item"> <div class="c-btn minus">-</div> <input type="text " value="{{quantity}} " readonly=readonly data-max={{productStock}}> <div class="c-btn add">+</div> </div> <div class="c-total c-item"> <span>￥{{productTotalPrice}}</span> </div> <div class="c-operate c-item"> <span class=delete>删除</span> </div> </div> {{/cartProductVoList}} </div> <div class=cart-footer> <div class="c-select-all c-item"> {{#allChecked}} <input type=checkbox checked=checked /> {{/allChecked}} {{^allChecked}} <input type=checkbox /> {{/allChecked}} </div> <div class="delete-all c-item"> <span class="fa fa-trash-o"> <i class=delete-checked>删除选中</i> </span> </div> <div class="total c-item"> <span>总价:￥{{cartTotalPrice}}</span> </div> <div class="submit btn c-item">去结账</div> </div>  {{/cartProductVoList}} {{^cartProductVoList}} <p>购物车中空空如也,快去选购吧</p><a href=./index.html class=link>前往商品页面</a> {{/cartProductVoList}}'},59:function(t,c,e){e(16);var i=e(1),n=e(10),a=e(9),d=e(40),o={data:{},init:function(){this.onload(),this.bindEvent()},onload:function(){this.loadCart()},bindEvent:function(){var t=this;t.select(t),t.selectAll(t),t.updateCount(t),t.deleteCartProduct(t),t.deleteCheckedProduct(t),t.submit(t)},loadCart:function(){var t=this;n.getCartList(function(c){var e="";e=i.renderHtml(d,c.data),$(".cart").html(e),a.loadCartInfo(),t.data=c.data},function(t){i.errorHint(t)})},select:function(t){$(document).on("click",".c-select",function(){var c=$(this).children("input"),e=c.parents(".list-item").data("product-id");c.is(":checked")?n.select(e,function(c){t.loadCart()},function(t){i.errorHint(t)}):n.unselect(e,function(c){t.loadCart()},function(t){i.errorHint(t)})})},selectAll:function(t){$(document).on("click",".c-select-all",function(){var c=$(this).children("input");c.is(":checked")?n.selectAll(function(c){t.loadCart()},function(t){i.errorHint(t)}):n.unselectAll(function(c){t.loadCart()},function(t){i.errorHint(t)})})},updateCount:function(t){$(document).on("click",".c-number .c-btn",function(){var c=$(this),e=c.siblings("input").val(),a=c.parents(".list-item").data("product-id"),d=1,o=c.siblings("input").data("max"),s=0,l={productId:a,count:e},r=c.hasClass("add")?"add":"minus";if("add"===r){if(s=e+1,s>o)return;++e,l.count=e,n.updateCount(l,function(c){t.loadCart()},function(t){i.errorHint(t)})}else{if(s=e-1,s<d)return;--e,l.count=e,n.updateCount(l,function(c){t.loadCart()},function(t){i.errorHint(t)})}})},deleteCartProduct:function(t){$(document).on("click",".delete",function(){var c=$(this);window.confirm("确认要删除吗")&&n.deleteProduct(c.parents(".list-item").data("product-id"),function(c){t.loadCart()},function(t){i.errorHint(t)})})},deleteCheckedProduct:function(t){$(document).on("click",".delete-checked",function(){$(this);if(window.confirm("确认要删除选中项吗")){for(var c=$(".c-select input:checked").parents(".list-item"),e=[],a=0;a<c.length;a++)e.push(c.eq(a).data("product-id"));e=e.join(","),n.deleteProduct(e,function(c){t.loadCart()},function(t){i.errorHint(t)})}})},submit:function(t){$(document).on("click",".submit",function(){if(window.confirm("确定要提交吗")){var c=t.data;console.log(t.data),c.cartTotalPrice>0&&(window.location.href="./order-confirm.html")}})}};$(function(){o.init()})}});